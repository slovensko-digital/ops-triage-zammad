class Ops::CategoryMapper
  EVERYTHING_ELSE_CATEGORY = [ "Ostatné", "iné", nil ]

  CATEGORY_MAPPING = {
    [ "1", "schody", "poškodené" ] => [ "Komunikácie", "schody", "poškodená" ], # TODO nesedí rod subtypu
    [ "1", "schody", "neodhrnuté" ] => [ "Komunikácie", "schody", "neodhrnutá" ], # TODO nesedí rod subtypu
    [ "1", "schody", "neposypané" ] => [ "Komunikácie", "schody", "neposypaná" ], # TODO nesedí rod subtypu
    [ "1", "schody", "znečistené" ] => [ "Komunikácie", "schody", "znečistená" ], # TODO nesedí rod subtypu
    [ "1", "cesta", "výtlk" ] => [ "Komunikácie", "cesta", "výtlk" ],
    [ "1", "cesta", "rozbitá (väčší úsek)" ] => [ "Komunikácie", "cesta", "rozbitá cesta (väčší úsek)" ],
    [ "1", "cesta", "znečistená" ] => [ "Komunikácie", "cesta", "znečistená" ],
    [ "1", "cesta", "neodhrnutá" ] => [ "Komunikácie", "cesta", "neodhrnutá" ],
    [ "1", "cesta", "neposypaná" ] => [ "Komunikácie", "cesta", "neposypaná" ],
    [ "1", "cesta", "rozkopaná" ] => [ "Komunikácie", "cesta", "rozkopaná" ],
    [ "1", "cesta", "poškodená dlažba" ] => [ "Komunikácie", "cesta", "poškodená dlažba" ],
    [ "1", "chodník", "výtlk" ] => [ "Komunikácie", "chodník", "výtlk" ],
    [ "1", "chodník", "znečistený" ] => [ "Komunikácie", "chodník", "znečistený" ],
    [ "1", "chodník", "neodhrnutý" ] => [ "Komunikácie", "chodník", "neodhrnutý" ],
    [ "1", "chodník", "neposypaný" ] => [ "Komunikácie", "chodník", "neposypaný" ],
    [ "1", "chodník", "bariérový" ] => [ "Komunikácie", "chodník", "bariéra na chodníku" ],
    [ "1", "chodník", "rozkopaný" ] => [ "Komunikácie", "chodník", "rozkopaný" ],
    [ "1", "chodník", "chýbajúci" ] => [ "Komunikácie", "chodník", "chýbajúci" ],
    [ "1", "chodník", "poškodená dlažba" ] => [ "Komunikácie", "chodník", "poškodená dlažba" ],
    [ "1", "chodník", "bariéra na chodníku" ] => [ "Komunikácie", "chodník", "bariéra na chodníku" ],
    [ "1", "cyklotrasa", "poškodená" ] => [ "Komunikácie", "cyklotrasa", "poškodená" ],
    [ "1", "cyklotrasa", "chýbajúca" ] => [ "Komunikácie", "cyklotrasa", "chýbajúca" ],
    [ "1", "cyklotrasa", "neoznačená" ] => [ "Komunikácie", "cyklotrasa", "neoznačená" ],
    [ "1", "cyklotrasa", "znečistená" ] => [ "Komunikácie", "cyklotrasa", "znečistená" ],
    [ "1", "cyklotrasa", "neodhrnutá" ] => [ "Komunikácie", "cyklotrasa", "neodhrnutá" ],
    [ "1", "cyklotrasa", "neposypaná" ] => [ "Komunikácie", "cyklotrasa", "neposypaná" ],
    [ "1", "zábradlie", "chýbajúce" ] => [ "Mobiliár", "zábradlie/oplotenie", "chýbajúce" ],
    [ "1", "zábradlie", "poškodené" ] => [ "Mobiliár", "zábradlie/oplotenie", "poškodené" ],
    [ "1", "zábradlie", "zhrdzavené" ] => [ "Mobiliár", "zábradlie/oplotenie", "zhrdzavené" ],
    [ "1", "oplotenie", "chýbajúce" ] => [ "Mobiliár", "zábradlie/oplotenie", "chýbajúce" ],
    [ "1", "oplotenie", "poškodené" ] => [ "Mobiliár", "zábradlie/oplotenie", "poškodené" ],
    [ "1", "oplotenie", "zhrdzavené" ] => [ "Mobiliár", "zábradlie/oplotenie", "zhrdzavené" ],
    [ "1", "iné", nil ] => EVERYTHING_ELSE_CATEGORY,
    [ "2", "neporiadok a odpadky", "neodpratané lístie" ] => [ "Verejný poriadok", "neporiadok vo verejnom priestranstve", "neodpratané lístie" ],
    [ "2", "neporiadok a odpadky", "čierne skládky" ] => [ "Skládky a vraky", "nelegálne skládky", nil ],
    [ "2", "neporiadok a odpadky", "neporiadok vo verejnom priestranstve" ] => [ "Verejný poriadok", "neporiadok vo verejnom priestranstve", "neporiadok vo verejnom priestore" ],
    [ "2", "strom", "suchý" ] => [ "Zeleň a znečisťovanie", "strom", "suchý" ],
    [ "2", "strom", "chýbajúci" ] => [ "Zeleň a znečisťovanie", "strom", "chýbajúci" ],
    [ "2", "strom", "neorezaný" ] => [ "Zeleň a znečisťovanie", "strom", "neorezaný" ],
    [ "2", "strom", "zlomený konár" ] => [ "Zeleň a znečisťovanie", "strom", "zlomený konár" ],
    [ "2", "strom", "napadnutý" ] => [ "Zeleň a znečisťovanie", "strom", "napadnutý" ],
    [ "2", "strom", "invazívna rastlina" ] => [ "Zeleň a znečisťovanie", "strom", "invazívna rastlina" ],
    [ "2", "strom", "poškodená podpera" ] => [ "Zeleň a znečisťovanie", "strom", "poškodená podpera" ],
    [ "2", "trávnatá plocha", "nepokosená" ] => [ "Zeleň a znečisťovanie", "kosenie", "nepravidelne" ],
    [ "2", "trávnatá plocha", "vyschnutá" ] => EVERYTHING_ELSE_CATEGORY,
    [ "2", "trávnatá plocha", "vyjazdené koľaje" ] => EVERYTHING_ELSE_CATEGORY,
    [ "2", "krík", "suchý" ] => [ "Zeleň a znečisťovanie", "krík", "suchý" ],
    [ "2", "krík", "neostrihaný" ] => [ "Zeleň a znečisťovanie", "krík", "neorezaný" ],
    [ "2", "krík", "chýbajúci" ] => [ "Zeleň a znečisťovanie", "krík", "chýbajúci" ],
    [ "2", "zviera", "túlavé" ] => [ "Zvieratá", "výbehy pre zvieratá", "túlavé mačky/psy" ],
    [ "2", "zviera", "uhynuté" ] => [ "Zvieratá", "mŕtvy živočích", nil ],
    [ "2", "zviera", "deratizácia" ] => [ "Zvieratá", "iné", nil ],
    [ "2", "znečisťovanie", "ovzdušia" ] => [ "Zeleň a znečisťovanie", "znečisťovanie", "voda, pôda, ovzdušie" ],
    [ "2", "znečisťovanie", "vody" ] => [ "Zeleň a znečisťovanie", "znečisťovanie", "voda, pôda, ovzdušie" ],
    [ "2", "znečisťovanie", "pôdy" ] => [ "Zeleň a znečisťovanie", "znečisťovanie", "voda, pôda, ovzdušie" ],
    [ "2", "iné", nil ] => EVERYTHING_ELSE_CATEGORY,
    [ "3", "priechod pre chodcov", "chýbajúci" ] => [ "Značenie", "priechod pre chodcov", "chýbajúci" ],
    [ "3", "priechod pre chodcov", "zle viditeľný" ] => [ "Značenie", "priechod pre chodcov", "zle viditeľný" ],
    [ "3", "semafor", "nefunkčný" ] => [ "Značenie", "semafor", "nefunkčný" ],
    [ "3", "semafor", "zle nastavený" ] => [ "Značenie", "semafor", "zle nastavený" ],
    [ "3", "semafor", "chýbajúci" ] => [ "Značenie", "semafor", "chýbajúci" ],
    [ "3", "dopravné zrkadlo", "chýbajúce" ] => [ "Značenie", "dopravné zrkadlo", "chýbajúce" ],
    [ "3", "dopravné zrkadlo", "zle natočené" ] => [ "Značenie", "dopravné zrkadlo", "zle natočené" ],
    [ "3", "dopravné zrkadlo", "poškodené" ] => [ "Značenie", "dopravné zrkadlo", "poškodené" ],
    [ "3", "vodorovná značka", "chýbajúca" ] => [ "Značenie", "vodorovné dopravné značenie", "chýbajúce" ],
    [ "3", "vodorovná značka", "neaktuálna" ] => [ "Značenie", "vodorovné dopravné značenie", "neaktuálne" ],
    [ "3", "vodorovná značka", "zle viditeľná" ] => [ "Značenie", "vodorovné dopravné značenie", "zle viditeľné" ],
    [ "3", "riešenie dopravnej situácie", "nebezpečné" ] => [ "Dopravné riešenie", "nebezpečné", "návrh na riešenie" ],
    [ "3", "riešenie dopravnej situácie", "dopravu spomaľujúce" ] => [ "Dopravné riešenie", "dopravu spomaľujúce", "návrh na riešenie" ],
    [ "3", "riešenie dopravnej situácie", "nedodržiavanie dopravných predpisov" ] => EVERYTHING_ELSE_CATEGORY,
    [ "3", "zvislá značka", "poškodená" ] => [ "Značenie", "zvislé dopravné značenie", "poškodené" ],
    [ "3", "zvislá značka", "neaktuálna" ] => [ "Značenie", "zvislé dopravné značenie", "neaktuálne" ],
    [ "3", "zvislá značka", "chýbajúca" ] => [ "Značenie", "zvislé dopravné značenie", "chýbajúce" ],
    [ "3", "zvislá značka", "vyblednutá" ] => [ "Značenie", "zvislé dopravné značenie", "vyblednuté" ],
    [ "3", "zvislá značka", "zle otočená" ] => [ "Značenie", "zvislé dopravné značenie", "zle otočené" ],
    [ "3", "spomaľovač", "chýbajúci" ] => [ "Značenie", "spomaľovač", "chýbajúci" ],
    [ "3", "spomaľovač", "poškodený" ] => [ "Značenie", "spomaľovač", "poškodený" ],
    [ "3", "betónová zábrana (biskupský klobúk)", "chýbajúca" ] => [ "Značenie", "protiparkovacia zábrana/stĺpik/biskupský klobúk", "chýbajúca" ],
    [ "3", "betónová zábrana (biskupský klobúk)", "posunutá" ] => [ "Značenie", "protiparkovacia zábrana/stĺpik/biskupský klobúk", "posunutá" ],
    [ "3", "betónová zábrana (biskupský klobúk)", "poškodená" ] => [ "Značenie", "protiparkovacia zábrana/stĺpik/biskupský klobúk", "poškodená" ],
    [ "3", "stĺpik", "chýbajúci" ] => [ "Značenie", "protiparkovacia zábrana/stĺpik/biskupský klobúk", "chýbajúca" ],
    [ "3", "stĺpik", "poškodený" ] => [ "Značenie", "protiparkovacia zábrana/stĺpik/biskupský klobúk", "poškodená" ],
    [ "3", "stĺpik", "nadbytočný" ] => EVERYTHING_ELSE_CATEGORY,
    [ "3", "iné", nil ] => EVERYTHING_ELSE_CATEGORY,
    [ "4", "lavička", "chýbajúca" ] => [ "Mobiliár", "lavička", "chýbajúca" ],
    [ "4", "lavička", "poškodená" ] => [ "Mobiliár", "lavička", "poškodená" ],
    [ "4", "lavička", "znečistená" ] => [ "Mobiliár", "lavička", "znečistená" ],
    [ "4", "socha, pamätník", "znečistená" ] => [ "Mobiliár", "socha/pamätník/pietne miesto", "znečistené" ],
    [ "4", "socha, pamätník", "poškodená" ] => [ "Mobiliár", "socha/pamätník/pietne miesto", "poškodené" ],
    [ "4", "zastávka MHD", "poškodená" ] => [ "Mestská hromadná doprava", "MHD zastávka", "poškodená" ],
    [ "4", "zastávka MHD", "chýbajúca" ] => [ "Mestská hromadná doprava", "MHD zastávka", "chýbajúca" ],
    [ "4", "zastávka MHD", "znečistená" ] => [ "Mestská hromadná doprava", "MHD zastávka", "znečistená" ],
    [ "4", "kôš", "poškodený" ] => [ "Mobiliár", "kôš", "poškodený" ],
    [ "4", "kôš", "preplnený" ] => [ "Mobiliár", "kôš", "preplnený" ],
    [ "4", "kôš", "chýbajúci" ] => [ "Mobiliár", "kôš", "chýbajúci" ],
    [ "4", "kôš", "nevhodne umiestnený" ] => [ "Mobiliár", "kôš", "nevhodne umiestnený" ],
    [ "4", "kôš", "chýbajúce sáčky" ] => [ "Mobiliár", "kôš", "chýbajúce sáčky" ],
    [ "4", "detské ihrisko", "poškodené" ] => [ "Ihrisko", "detské ihrisko", "poškodené" ],
    [ "4", "detské ihrisko", "chýbajúce" ] => [ "Ihrisko", "detské ihrisko", "chýbajúce" ],
    [ "4", "detské ihrisko", "potrebná údržba" ] => [ "Ihrisko", "detské ihrisko", "potrebná údržba" ],
    [ "4", "cyklostojan", "chýbajúci" ] => [ "Mobiliár", "cyklostojan", "chýbajúci" ],
    [ "4", "cyklostojan", "poškodený" ] => [ "Mobiliár", "cyklostojan", "poškodený" ],
    [ "4", "cyklostojan", "zle umiestnený" ] => [ "Mobiliár", "cyklostojan", "zle umiestnený" ],
    [ "4", "fontánka", "nefunkčná" ] => [ "Mobiliár", "pitná fontána", "nefunkčná" ],
    [ "4", "fontánka", "poškodená" ] => [ "Mobiliár", "pitná fontána", "poškodená" ],
    [ "4", "fontánka", "znečistená" ] => [ "Mobiliár", "pitná fontána", "znečistená" ],
    [ "4", "informačná tabuľa", "poškodená" ] => [ "Mobiliár", "informačná/smerová tabuľa", "poškodená" ],
    [ "4", "informačná tabuľa", "zle otočená" ] => [ "Mobiliár", "informačná/smerová tabuľa", "zle otočená" ],
    [ "4", "informačná tabuľa", "zle umiestnená" ] => [ "Mobiliár", "informačná/smerová tabuľa", "zle umiestnená" ],
    [ "4", "informačná tabuľa", "chýbajúca" ] => [ "Mobiliár", "informačná/smerová tabuľa", "chýbajúca" ],
    [ "4", "kvetináč", "poškodený" ] => [ "Mobiliár", "kvetináč", "poškodený" ],
    [ "4", "kvetináč", "posunutý" ] => [ "Mobiliár", "kvetináč", "posunutý" ],
    [ "4", "kvetináč", "zanedbaný" ] => [ "Mobiliár", "kvetináč", "zanedbaný" ],
    [ "4", "kvetináč", "chýbajúci" ] => [ "Mobiliár", "kvetináč", "chýbajúci" ],
    [ "4", "iné", nil ] => EVERYTHING_ELSE_CATEGORY,
    [ "5", "dlhodobo odstavené vozidlá", "vozidlo s EČV, s platnou TK a EK" ] => [ "Skládky a vraky", "vraky motorových vozidiel", nil ],
    [ "5", "dlhodobo odstavené vozidlá", "vozidlo bez EČV, bez platnej TK a EK" ] => [ "Skládky a vraky", "vraky motorových vozidiel", nil ],
    [ "5", "dlhodobo odstavené vozidlá", "vozidlo s EČV, bez platnej TK a EK" ] => [ "Skládky a vraky", "vraky motorových vozidiel", nil ],
    [ "5", "dlhodobo odstavené vozidlá", "nezistené EČV a TK a EK" ] => [ "Skládky a vraky", "vraky motorových vozidiel", nil ],
    [ "5", "dlhodobo odstavené vozidlá", "zahraničné vozidlo" ] => [ "Skládky a vraky", "vraky motorových vozidiel", nil ],
    [ "5", "dlhodobo odstavené vozidlá", "vozidlo bez EČV, s platnou TK a EK" ] => [ "Skládky a vraky", "vraky motorových vozidiel", nil ],
    [ "5", "parkovanie", "problémové" ] => EVERYTHING_ELSE_CATEGORY,
    [ "5", "parkovanie", "chýbajúce miesta" ] => EVERYTHING_ELSE_CATEGORY,
    [ "5", "parkovanie", "nevyznačené miesta" ] => EVERYTHING_ELSE_CATEGORY,
    [ "5", "iné", nil ] => EVERYTHING_ELSE_CATEGORY,
    [ "6", "MHD", "technické problémy" ] => EVERYTHING_ELSE_CATEGORY,
    [ "6", "MHD", "meškanie spojov" ] => [ "Mestská hromadná doprava", "služby hromadnej dopravy", "meškanie spojov" ],
    [ "6", "MHD", "poškodené vozidlo" ] => [ "Mestská hromadná doprava", "grafikon / zlé nastavenie cestovného poriadku", "poškodenie vozidla" ],
    [ "6", "MHD", "zlé nastavenie cestovného poriadku" ] => [ "Mestská hromadná doprava", "grafikon / zlé nastavenie cestovného poriadku", nil ],
    [ "6", "kanalizácia", "upchatá" ] => [ "Kanalizácia", "kanalizáčná vpusť", "upchatá" ], # TODO nesprávne dĺžen v subkategórii
    [ "6", "kanalizácia", "chýbajúci kanalizačný poklop" ] => [ "Kanalizácia", "kanalizáčná vpusť", "chýbajúci kanalizačný poklop" ], # TODO nesprávne dĺžen v subkategórii
    [ "6", "kanalizácia", "havária kanalizačného potrubia" ] => [ "Kanalizácia", "kanalizáčná vpusť", "havária kanalizačného potrubia" ], # TODO nesprávne dĺžen v subkategórii
    [ "6", "kanalizácia", "poškodený kanalizačný poklop" ] => [ "Kanalizácia", "kanalizáčná vpusť", "poškodený kanalizačný poklop" ], # TODO nesprávne dĺžen v subkategórii
    [ "6", "osvetlenie", "nefunkčné" ] => [ "Osvetlenie", "osvetlenie", "nefunknčné" ], # TODO preklep v subtype
    [ "6", "osvetlenie", "poškodené stĺpy" ] => [ "Osvetlenie", "osvetlenie", "poškodený stĺp" ],
    [ "6", "osvetlenie", "chýbajúce/nedostatočné" ] => [ "Osvetlenie", "osvetlenie", "chýbajúce" ],
    [ "6", "osvetlenie", "nevhodné (silné a pod.)" ] => [ "Osvetlenie", "osvetlenie", "nevhodné (silné a pod.)" ],
    [ "6", "webová stránka mesta", "chýbajúce informácie" ] => [ "Kontakt so samosprávou", "webová stránka mesta", "chýbajúca informácia" ],
    [ "6", "webová stránka mesta", "neaktuálne informácie" ] => [ "Kontakt so samosprávou", "webová stránka mesta", "neaktuálne informácie" ],
    [ "6", "webová stránka mesta", "nesprávne informácie" ] => EVERYTHING_ELSE_CATEGORY,
    [ "6", "webová stránka mesta", "nefunkčná stránka" ] => [ "Kontakt so samosprávou", "webová stránka mesta", "nefunkčná stránka" ],
    [ "6", "rozvodné siete", "poškodená rozvodná skriňa" ] => [ "Mobiliár", "rozvodná skriňa", "poškodená rozvodná skriňa" ],
    [ "6", "rozvodné siete", "nebezpečný kábel" ] => [ "Mobiliár", "rozvodná skriňa", "nebezpečný kábel" ],
    [ "6", "zdieľaná mobilita", "nevhodne zaparkovaný dopravný prostriedok" ] => [ "Zdieľaná mikromobilita", "bicykle", "nevhodne zaparkovaný dopravný prostriedok" ],
    [ "6", "zdieľaná mobilita", "nevhodne umiestnené parkovisko" ] => [ "Zdieľaná mikromobilita", "bicykle", "nevhodne umiestnené parkovisko" ],
    [ "6", "zdieľaná mobilita", "obmedzenie rýchlosti v zóne" ] => EVERYTHING_ELSE_CATEGORY,
    [ "6", "zdieľaná mobilita", "iné" ] => EVERYTHING_ELSE_CATEGORY,
    [ "6", "iné", nil ] => [ "Verejné služby", "iné", nil ],
    [ "7", "stavby a budovy", "neohlásené stavebné úpravy" ] => EVERYTHING_ELSE_CATEGORY,
    [ "7", "stavby a budovy", "prekračovanie limitov hluku" ] => EVERYTHING_ELSE_CATEGORY,
    [ "7", "stavby a budovy", "prekračovanie limitov prašnosti" ] => EVERYTHING_ELSE_CATEGORY,
    [ "7", "stavby a budovy", "opustená budova" ] => [ "Stavby", "budova", "nevyužívaná" ],
    [ "7", "stavby a budovy", "zlý stav budovy" ] => [ "Stavby", "budova", "poškodená" ],
    [ "7", "vandalizmus", "graffiti" ] => [ "Stavby", "budova", "grafiti" ],
    [ "7", "vandalizmus", "rušenie nočného pokoja" ] => [ "Verejný poriadok", "vandalizmus", "rušenie nočného pokoja" ],
    [ "7", "vandalizmus", "pitie alkoholu na verejnosti" ] => [ "Verejný poriadok", "vandalizmus", "pitie alkoholu na verejnom priestore" ],
    [ "7", "reklama", "vizuálny smog" ] => [ "Verejný poriadok", "iné", nil ],
    [ "7", "reklama", "nevhodne umiestnená (na chodníku a pod.)" ] => [ "Verejný poriadok", "reklama", "nevhodne umiestnená" ],
    [ "7", "reklama", "vylepené plagáty" ] => [ "Verejný poriadok", "reklama", "nelegálna reklama" ],
    [ "7", "reklama", "nebezpečná (na spadnutie a pod.)" ] => [ "Verejný poriadok", "reklama", "nebezpečná (na spadnutie a pod)" ],
    [ "7", "iné", nil ] => [ "Verejný poriadok", "iné", nil ]
  }

  def self.map_legacy_categories_to_new(legacy_category, legacy_subcategory, legacy_subtype)
    legacy_key = [ legacy_category.presence, legacy_subcategory.presence, legacy_subtype.presence ]
    CATEGORY_MAPPING[legacy_key].presence || EVERYTHING_ELSE_CATEGORY
  end
end
