service:
  externalPort: 3000
  internalPort: 3000
image:
  secrets:
  - name: skdigital-bonet-registry
ingress:
  annotations:
    nginx.ingress.kubernetes.io/proxy-body-size: 256m
    nginx.ingress.kubernetes.io/server-snippets: |
      location /cable {
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "Upgrade";
        proxy_set_header CLIENT_IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_read_timeout 86400;
        proxy_pass http://zammad-ops-auto-deploy:3000;
      }
application.migrateCommand: ["zammad-init"]
startupProbe:
  probeType: "exec"
  command: ["true"]
livenessProbe:
  probeType: "exec"
  command: ["true"]
readinessProbe:
  probeType: "exec"
  command: ["true"]
resources:
  requests:
    memory: 1.5Gi
  limits:
    memory: 2Gi
persistence:
  enabled: true
  volumes:
  - name: zammad-storage
    mount:
      path: /opt/zammad/storage
    claim:
      accessMode: ReadWriteMany
      size: 1Gi
      storageClass: nfs-client
workers:
  worker:
    replicaCount: "1"
    command: ["/docker-entrypoint.sh", "zammad-scheduler"]
    startupProbe:
      probeType: "exec"
      command: ["true"]
    livenessProbe:
      probeType: "exec"
      command: ["true"]
    readinessProbe:
      probeType: "exec"
      command: ["true"]
    resources:
      requests:
        memory: 2Gi
      limits:
        memory: 2.5Gi